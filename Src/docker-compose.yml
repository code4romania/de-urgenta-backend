  version: '3.4'

  services:
    postgres:
      image: postgres
      container_name: postgres
      environment:
        - POSTGRES_PASSWORD=docker
        - POSTGRES_USER=docker
        - POSTGRES_DB=postgres
      ports:
        - 5432:5432
      volumes:
        - ./postgres_data:/var/lib/postgresql/data
    de-urgenta.api:
      build:
        context: .
        dockerfile: Dockerfile
      environment:
        - ASPNETCORE_URLS=http://+:80
        - ConnectionStrings__DbConnectionString=Server=postgres;Port=5432;Database=de-urgenta-db;User Id=docker;Password=docker;
      ports:
        - 5040:80
    de-urgenta-recurent-jobs:
      build:
        context: .
        dockerfile: DeUrgenta.RecurringJobs.Dockerfile
      environment:
        - ASPNETCORE_URLS=http://+:80
        - ConnectionStrings__DbConnectionString=Server=postgres;Port=5432;Database=de-urgenta-db;User Id=docker;Password=docker;
      ports:
        - 5041:80